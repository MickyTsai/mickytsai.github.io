---
title: "從零開始：如何成功建置並執行你的第一次UITest"
author: "Micky Tsai"
date: 2024-08-23T07:42:45.047+0000
last_modified_at: 2025-02-20T07:24:24.987+0000
categories: [""]
tags: ["uitest","swift"]
description: "紀錄在從未執行過 UITtest 的 app 讓它能成功跑 UITtest 期間遇到的狀況"
image:
  path: /assets/8d1cd8984437/1*3uwT8B03wZgoqGmsVJ84TA.png
render_with_liquid: false
---

### 從零開始：如何成功建置並執行你的第一次UITest


![紀錄在從未執行過 UITtest 的 app 讓它能成功跑 UITtest 期間遇到的狀況](/assets/8d1cd8984437/1*3uwT8B03wZgoqGmsVJ84TA.png)

紀錄在從未執行過 UITtest 的 app 讓它能成功跑 UITtest 期間遇到的狀況
#### 先讓 UITests 能 build 成功

錯誤：There is no scheme and/or test plan that contains every test you are
trying to run\.

處理：UITests 沒被配置到任何 target 的 test 階段，所以從 scheme Edit 中把 UT scheme 的 test 階段加進去就可以了


![](/assets/8d1cd8984437/1*hNSwqhgQMIsIC5THldR46g.png)


錯誤：各種文檔案顯示 build 失敗

處理：清除其他無關檔案卻有勾選 UITest 的檔案


![跟UITtest無相關的檔案都取消掉](/assets/8d1cd8984437/1*Wmhg_3DLpGD5vjdA7xW4-A.png)

跟UITtest無相關的檔案都取消掉

錯誤：Undefined symbols: Linker command failed with exit code 1 \(use \-v to see invocation\)

處理：清除不必要的 Compile Sources 和 Copy Bundle Resources


![不會用到的通通刪除，一些比較久的 code 可能多了很多無關的](/assets/8d1cd8984437/1*owEynF80Jv3gVCOFkzMb7A@2x.png)

不會用到的通通刪除，一些比較久的 code 可能多了很多無關的

第一次build成功
#### 要能自動登入

怎麼找到登入時帳密的輸入框？

（輸入框是 **自定義物件** 但在 vc 有拉出物件）
```swift
// 在 VC 長這樣
@IBOutlet var xxxView(自定義物件): userIDView!
// 在 UITest 這樣抓
private lazy var userIDInputView = app.otherElements["userIDView"]
```

物件不只一層，裡面有多個物件時怎麼抓？

[可以透過下 break point 時下指令 po 物件\.children\(matching: \.any\)](https://youtu.be/IcZXn0DvO84?t=2235){:target="_blank"}

[children\(matching:\)](https://developer.apple.com/documentation/xctest/xcuielementquery/1501006-children){:target="_blank"}


![](/assets/8d1cd8984437/1*L2TpRnmcAQf-wY6JoQjlHQ.png)


因為原本一直找不到輸入使用者名稱的 textfield，後來這樣才發現原來不是單純的在 view 的下一層。

用 \.descendants 似乎可以列出更多層

[descendants\(matching:\)](https://developer.apple.com/documentation/xctest/xcuielementquery/1500659-descendants){:target="_blank"}


![](/assets/8d1cd8984437/1*BBaw2yosnQQhP0PxiQZG6A.png)


登入時的帳號密碼可能是 secureTextFields 要留意跟 textFields 是不一樣的！

成功進行登入
#### 跑 UITest 可能失敗的狀況

可能造成測試失敗：登入進行時可能出現的警告視窗如何點掉？
```swift
/// 可以檢查警告彈窗上的按鈕，有偵測到就點掉
sleep(1) // 等待彈窗出現緩衝時間
if app.buttons.staticTexts["按鈕文字"].exits {
let btn = app.buttons.staticTexts["按鈕文字"]
btn.tap()
}
```

錯誤：Neither element nor any descendant has keyboard focus\.

要點擊輸入的元素（輸入框之類的）沒有鍵盤焦點（沒點擊到、沒有firstresponse之類的）

可能有開 ipone 的輔助操作（畫面會出現圓點） 蓋到要點擊的輸入框了



_[Post](https://medium.com/@micky1127/%E5%BE%9E%E9%9B%B6%E9%96%8B%E5%A7%8B-%E5%A6%82%E4%BD%95%E6%88%90%E5%8A%9F%E5%BB%BA%E7%BD%AE%E4%B8%A6%E5%9F%B7%E8%A1%8C%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E6%AC%A1uitest-8d1cd8984437){:target="_blank"} converted from Medium by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}._
